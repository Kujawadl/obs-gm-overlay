(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9334:function(e,n,r){"use strict";var i=r(3366),s=r(7462),a=r(7294),o=r(3680),l=r(4780),t=r(5861),c=r(9773),d=r(1657),x=r(948),h=r(6336),p=r(5893);let m=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],u=e=>{let{classes:n,inset:r,primary:i,secondary:s,dense:a}=e;return(0,l.Z)({root:["root",r&&"inset",a&&"dense",i&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},h.L,n)},Z=(0,x.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:r}=e;return[{[`& .${h.Z.primary}`]:n.primary},{[`& .${h.Z.secondary}`]:n.secondary},n.root,r.inset&&n.inset,r.primary&&r.secondary&&n.multiline,r.dense&&n.dense]}})(({ownerState:e})=>(0,s.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),j=a.forwardRef(function(e,n){let r=(0,d.Z)({props:e,name:"MuiListItemText"}),{children:l,className:x,disableTypography:h=!1,inset:j=!1,primary:y,primaryTypographyProps:f,secondary:v,secondaryTypographyProps:g}=r,b=(0,i.Z)(r,m),{dense:C}=a.useContext(c.Z),w=null!=y?y:l,z=v,k=(0,s.Z)({},r,{disableTypography:h,inset:j,primary:!!w,secondary:!!z,dense:C}),T=u(k);return null==w||w.type===t.Z||h||(w=(0,p.jsx)(t.Z,(0,s.Z)({variant:C?"body2":"body1",className:T.primary,component:null!=f&&f.variant?void 0:"span",display:"block"},f,{children:w}))),null==z||z.type===t.Z||h||(z=(0,p.jsx)(t.Z,(0,s.Z)({variant:"body2",className:T.secondary,color:"text.secondary",display:"block"},g,{children:z}))),(0,p.jsxs)(Z,(0,s.Z)({className:(0,o.Z)(T.root,x),ownerState:k,ref:n},b,{children:[w,z]}))});n.Z=j},8312:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(2483)}])},2483:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return E}});var i=r(5893),s=r(2428),a=r(6574),o=r(5861),l=r(9226),t=r(3321),c=r(9008),d=r.n(c),x=r(1163),h=r(7294),p=r(8462),m=r(891),u=r(9334),Z=r(1797),j=r(8169),y=(0,j.Z)((0,i.jsx)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List"),f=(0,j.Z)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm0 16H5V7h14v12zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5zM12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4zm0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"Preview"),v=(0,j.Z)((0,i.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew"),g=r(6761),b=r(2734),C=r(8396),w=r(7081),z=r(9840),k=r(3795),T=r(657),_=r(7645),N=r(6580),S=r(8951),B=r(1425),H=r(1664),M=r.n(H),I=r(8054);function L(e){let{campaign:n,refetch:r}=e,[s]=(0,I.Wd)({variables:{id:n.id}}),[a,c]=(0,h.useState)(!1),[d,x]=(0,h.useState)(null),p=e=>{x(e.currentTarget)},j=()=>{x(null)},H=(0,b.Z)(),L=(0,C.Z)(H.breakpoints.only("xs"));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.ZP,{sx:{flexWrap:"wrap",border:0,borderBottom:1,borderStyle:"solid",borderColor:"grey.400"},children:[(0,i.jsx)(u.Z,{sx:{flexBasis:"100%"},children:(0,i.jsx)(o.Z,{variant:"h5",children:n.name})}),(0,i.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",width:"100%"},children:[(0,i.jsx)(l.Z,{sx:{flexGrow:1,flexBasis:L?"100%":"auto"},children:(0,i.jsx)(M(),{href:"/".concat(n.id,"/edit"),children:(0,i.jsxs)(t.Z,{component:"a",children:[(0,i.jsx)(Z.Z,{sx:{paddingRight:1,fontSize:"1.8rem"}}),"Edit"]})})}),(0,i.jsx)(l.Z,{sx:{flexGrow:1,flexBasis:L?"100%":"auto"},children:(0,i.jsx)(M(),{href:"/".concat(n.id,"/encounter"),children:(0,i.jsxs)(t.Z,{component:"a",children:[(0,i.jsx)(y,{sx:{paddingRight:1,fontSize:"1.8rem"}}),"Encounters"]})})}),(0,i.jsxs)(l.Z,{sx:{flexGrow:1,flexBasis:L?"100%":"auto"},children:[(0,i.jsxs)(t.Z,{onClick:p,"aria-label":"preview overlay","aria-controls":"menu-overlays","aria-haspopup":"true",children:[(0,i.jsx)(f,{sx:{paddingRight:1,fontSize:"1.8rem"}}),(0,i.jsx)(l.Z,{sx:{display:"flex",alignItems:"baseline"},children:"Preview Overlay"})]}),(0,i.jsxs)(w.Z,{id:"menu-overlays",anchorEl:d,keepMounted:!0,open:!!d,onClose:j,children:[(0,i.jsx)(z.Z,{children:(0,i.jsx)(k.Z,{component:"a",underline:"none",color:"inherit",href:"/".concat(n.id,"/overlay/inspiration"),target:"_blank",rel:"noreferrer",onClick:()=>j(),children:(0,i.jsxs)(l.Z,{sx:{display:"flex",alignItems:"baseline"},children:["Inspiration",(0,i.jsx)(v,{sx:{fontSize:"0.8rem",marginLeft:.5}})]})})}),(0,i.jsx)(z.Z,{children:(0,i.jsx)(k.Z,{component:"a",underline:"none",color:"inherit",href:"/".concat(n.id,"/overlay/initiative"),target:"_blank",rel:"noreferrer",onClick:()=>j(),children:(0,i.jsxs)(l.Z,{sx:{display:"flex",alignItems:"baseline"},children:["Initiative",(0,i.jsx)(v,{sx:{fontSize:"0.8rem",marginLeft:.5}})]})})})]})]}),(0,i.jsx)(l.Z,{sx:{flexBasis:L?"100%":"auto"},children:(0,i.jsxs)(t.Z,{color:"error",onClick:()=>c(!0),children:[(0,i.jsx)(g.Z,{sx:{paddingRight:1,fontSize:"1.8rem"}}),"Delete"]})})]})]},n.id),(0,i.jsxs)(T.Z,{open:a,onClose:()=>c(!1),children:[(0,i.jsxs)(_.Z,{children:["Delete campaign ",n.name," and all of its players?"]}),(0,i.jsx)(N.Z,{children:(0,i.jsx)(S.Z,{children:"This action cannot be undone."})}),(0,i.jsxs)(B.Z,{children:[(0,i.jsx)(t.Z,{variant:"contained",onClick:()=>c(!1),children:"Cancel"}),(0,i.jsxs)(t.Z,{variant:"contained",onClick:()=>{s().then(e=>{var n;let{data:i}=e;(null==i?void 0:null===(n=i.campaign)||void 0===n?void 0:n.delete)&&(r(),c(!1))})},color:"error",children:[(0,i.jsx)(g.Z,{})," Delete"]})]})]})]})}function P(e){let{campaigns:n,refetch:r}=e;return(0,i.jsx)(p.Z,{sx:{marginTop:2,paddingTop:0,border:0,borderTop:2,borderStyle:"solid",borderColor:"primary.light"},children:n&&n.length>0?n.map(e=>(0,i.jsx)(L,{campaign:e,refetch:r},e.id)):(0,i.jsx)(m.ZP,{sx:{border:0,borderBottom:1,borderStyle:"solid",borderColor:"grey.400"},children:(0,i.jsx)(u.Z,{children:"No Campaigns Found..."})})})}function E(){let{data:e,refetch:n}=(0,I.if)(),[r]=(0,I.u9)(),c=(0,x.useRouter)(),p=(0,h.useCallback)(()=>{r({variables:{input:{name:"New Campaign",gmInspiration:!1}}}).then(e=>{let{data:r}=e;(null==r?void 0:r.campaign)&&c.push("/".concat(r.campaign.save.id,"/edit")),n()})},[r,c,n]);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d(),{children:(0,i.jsx)("title",{children:"List Campaigns | OBS GM Overlay"})}),(0,i.jsxs)(a.Z,{fixed:!0,children:[(0,i.jsx)(o.Z,{variant:"h3",children:"Campaigns"}),(0,i.jsx)(P,{campaigns:e.campaigns,refetch:n}),(0,i.jsx)(l.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,i.jsxs)(t.Z,{variant:"contained",color:"success",onClick:p,children:[(0,i.jsx)(s.Z,{})," New Campaign"]})})]})]}):null}}},function(e){e.O(0,[387,934,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);