(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{16760:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(94662)}])},83690:(e,n,r)=>{"use strict";r.d(n,{A:()=>u});var i=r(14232),s=r(69241),a=r(13323),o=r(26172),t=r(61428),l=r(16749),c=r(57947),d=r(30985),x=r(45758),p=r(74778),h=r(37876);let m=(0,c.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:r}=e;return[{["& .".concat(x.A.primary)]:n.primary},{["& .".concat(x.A.secondary)]:n.secondary},n.root,r.inset&&n.inset,r.primary&&r.secondary&&n.multiline,r.dense&&n.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[".".concat(o.A.root,":where(& .").concat(x.A.primary,")")]:{display:"block"},[".".concat(o.A.root,":where(& .").concat(x.A.secondary,")")]:{display:"block"},variants:[{props:e=>{let{ownerState:n}=e;return n.primary&&n.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:n}=e;return n.inset},style:{paddingLeft:56}}]}),u=i.forwardRef(function(e,n){let r=(0,d.b)({props:e,name:"MuiListItemText"}),{children:o,className:c,disableTypography:u=!1,inset:y=!1,primary:A,primaryTypographyProps:j,secondary:f,secondaryTypographyProps:v,slots:g={},slotProps:b={},...w}=r,{dense:C}=i.useContext(l.A),k=null!=A?A:o,z=f,_={...r,disableTypography:u,inset:y,primary:!!k,secondary:!!z,dense:C},T=(e=>{let{classes:n,inset:r,primary:i,secondary:s,dense:o}=e;return(0,a.A)({root:["root",r&&"inset",o&&"dense",i&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},x.b,n)})(_),S={slots:g,slotProps:{primary:j,secondary:v,...b}},[N,B]=(0,p.A)("root",{className:(0,s.A)(T.root,c),elementType:m,externalForwardedProps:{...S,...w},ownerState:_,ref:n}),[M,H]=(0,p.A)("primary",{className:T.primary,elementType:t.A,externalForwardedProps:S,ownerState:_}),[I,E]=(0,p.A)("secondary",{className:T.secondary,elementType:t.A,externalForwardedProps:S,ownerState:_});return null==k||k.type===t.A||u||(k=(0,h.jsx)(M,{variant:C?"body2":"body1",component:(null==H?void 0:H.variant)?void 0:"span",...H,children:k})),null==z||z.type===t.A||u||(z=(0,h.jsx)(I,{variant:"body2",color:"textSecondary",...E,children:z})),(0,h.jsxs)(N,{...B,children:[k,z]})})},94662:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>R});var i=r(37876),s=r(92989),a=r(87460),o=r(61428),t=r(2312),l=r(32643),c=r(77328),d=r.n(c),x=r(89099),p=r(14232),h=r(40510),m=r(83694),u=r(83690),y=r(25878),A=r(71257);let j=(0,A.A)((0,i.jsx)("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List"),f=(0,A.A)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview"),v=(0,A.A)((0,i.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");var g=r(92781),b=r(60964),w=r(11863),C=r(90059),k=r(4146),z=r(35078),_=r(65657),T=r(97444),S=r(34293),N=r(59256),B=r(72528),M=r(48230),H=r.n(M),I=r(57982);function E(e){let{campaign:n,refetch:r}=e,[s]=(0,I.w_)({variables:{id:n.id}}),[a,c]=(0,p.useState)(!1),[d,x]=(0,p.useState)(null),h=()=>{x(null)},A=(0,b.A)(),M=(0,w.A)(A.breakpoints.only("xs"));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.Ay,{sx:{flexWrap:"wrap",border:0,borderBottom:1,borderStyle:"solid",borderColor:"grey.400"},children:[(0,i.jsx)(u.A,{sx:{flexBasis:"100%"},children:(0,i.jsx)(o.A,{variant:"h5",children:n.name})}),(0,i.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",width:"100%"},children:[(0,i.jsx)(t.A,{sx:{flexGrow:1,flexBasis:M?"100%":"auto"},children:(0,i.jsx)(H(),{href:"/".concat(n.id,"/edit"),children:(0,i.jsxs)(l.A,{component:"span",children:[(0,i.jsx)(y.A,{sx:{paddingRight:1,fontSize:"1.8rem"}}),"Edit"]})})}),(0,i.jsx)(t.A,{sx:{flexGrow:1,flexBasis:M?"100%":"auto"},children:(0,i.jsx)(H(),{href:"/".concat(n.id,"/encounter"),children:(0,i.jsxs)(l.A,{component:"span",children:[(0,i.jsx)(j,{sx:{paddingRight:1,fontSize:"1.8rem"}}),"Encounters"]})})}),(0,i.jsxs)(t.A,{sx:{flexGrow:1,flexBasis:M?"100%":"auto"},children:[(0,i.jsxs)(l.A,{onClick:e=>{x(e.currentTarget)},"aria-label":"preview overlay","aria-controls":"menu-overlays","aria-haspopup":"true",children:[(0,i.jsx)(f,{sx:{paddingRight:1,fontSize:"1.8rem"}}),(0,i.jsx)(t.A,{sx:{display:"flex",alignItems:"baseline"},children:"Preview Overlay"})]}),(0,i.jsxs)(C.A,{id:"menu-overlays",anchorEl:d,keepMounted:!0,open:!!d,onClose:h,children:[(0,i.jsx)(k.A,{children:(0,i.jsx)(z.A,{component:"a",underline:"none",color:"inherit",href:"/".concat(n.id,"/overlay/inspiration"),target:"_blank",rel:"noreferrer",onClick:()=>h(),children:(0,i.jsxs)(t.A,{sx:{display:"flex",alignItems:"baseline"},children:["Inspiration",(0,i.jsx)(v,{sx:{fontSize:"0.8rem",marginLeft:.5}})]})})}),(0,i.jsx)(k.A,{children:(0,i.jsx)(z.A,{component:"a",underline:"none",color:"inherit",href:"/".concat(n.id,"/overlay/initiative"),target:"_blank",rel:"noreferrer",onClick:()=>h(),children:(0,i.jsxs)(t.A,{sx:{display:"flex",alignItems:"baseline"},children:["Initiative",(0,i.jsx)(v,{sx:{fontSize:"0.8rem",marginLeft:.5}})]})})})]})]}),(0,i.jsx)(t.A,{sx:{flexBasis:M?"100%":"auto"},children:(0,i.jsxs)(l.A,{color:"error",onClick:()=>c(!0),children:[(0,i.jsx)(g.A,{sx:{paddingRight:1,fontSize:"1.8rem"}}),"Delete"]})})]})]},n.id),(0,i.jsxs)(_.A,{open:a,onClose:()=>c(!1),children:[(0,i.jsxs)(T.A,{children:["Delete campaign ",n.name," and all of its players?"]}),(0,i.jsx)(S.A,{children:(0,i.jsx)(N.A,{children:"This action cannot be undone."})}),(0,i.jsxs)(B.A,{children:[(0,i.jsx)(l.A,{variant:"contained",onClick:()=>c(!1),children:"Cancel"}),(0,i.jsxs)(l.A,{variant:"contained",onClick:()=>{s().then(e=>{var n;let{data:i}=e;(null==i||null==(n=i.campaign)?void 0:n.delete)&&(r(),c(!1))})},color:"error",children:[(0,i.jsx)(g.A,{})," Delete"]})]})]})]})}function L(e){let{campaigns:n,refetch:r}=e;return(0,i.jsx)(h.A,{sx:{marginTop:2,paddingTop:0,border:0,borderTop:2,borderStyle:"solid",borderColor:"primary.light"},children:n&&n.length>0?n.map(e=>(0,i.jsx)(E,{campaign:e,refetch:r},e.id)):(0,i.jsx)(m.Ay,{sx:{border:0,borderBottom:1,borderStyle:"solid",borderColor:"grey.400"},children:(0,i.jsx)(u.A,{children:"No Campaigns Found..."})})})}function R(){let{data:e,refetch:n}=(0,I.hy)(),[r]=(0,I.sF)(),c=(0,x.useRouter)(),h=(0,p.useCallback)(()=>{r({variables:{input:{name:"New Campaign",gmInspiration:!1}}}).then(e=>{let{data:r}=e;(null==r?void 0:r.campaign)&&c.push("/".concat(r.campaign.save.id,"/edit")),n()})},[r,c,n]);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d(),{children:(0,i.jsx)("title",{children:"List Campaigns | OBS GM Overlay"})}),(0,i.jsxs)(a.A,{fixed:!0,children:[(0,i.jsx)(o.A,{variant:"h3",children:"Campaigns"}),(0,i.jsx)(L,{campaigns:e.campaigns,refetch:n}),(0,i.jsx)(t.A,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,i.jsxs)(l.A,{variant:"contained",color:"success",onClick:h,children:[(0,i.jsx)(s.A,{})," New Campaign"]})})]})]}):null}}},e=>{e.O(0,[46,798,632,99,636,593,792],()=>e(e.s=16760)),_N_E=e.O()}]);