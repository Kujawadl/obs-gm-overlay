(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{8456:function(e,r,t){"use strict";t.d(r,{Z:function(){return P}});var n=t(3366),i=t(7462),o=t(7294),a=t(3680),s=t(4780),l=t(917),c=t(8216),u=t(1657),d=t(948),v=t(1588),f=t(4867);function m(e){return(0,f.Z)("MuiCircularProgress",e)}(0,v.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var p=t(5893);let h=["className","color","disableShrink","size","style","thickness","value","variant"],x=e=>e,g,y,k,Z,w=(0,l.F4)(g||(g=x`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),b=(0,l.F4)(y||(y=x`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),S=e=>{let{classes:r,variant:t,color:n,disableShrink:i}=e,o={root:["root",t,`color${(0,c.Z)(n)}`],svg:["svg"],circle:["circle",`circle${(0,c.Z)(t)}`,i&&"circleDisableShrink"]};return(0,s.Z)(o,m,r)},M=(0,d.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[t.variant],r[`color${(0,c.Z)(t.color)}`]]}})(({ownerState:e,theme:r})=>(0,i.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:r.transitions.create("transform")},"inherit"!==e.color&&{color:(r.vars||r).palette[e.color].main}),({ownerState:e})=>"indeterminate"===e.variant&&(0,l.iv)(k||(k=x`
      animation: ${0} 1.4s linear infinite;
    `),w)),j=(0,d.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),D=(0,d.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.circle,r[`circle${(0,c.Z)(t.variant)}`],t.disableShrink&&r.circleDisableShrink]}})(({ownerState:e,theme:r})=>(0,i.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:r.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,l.iv)(Z||(Z=x`
      animation: ${0} 1.4s ease-in-out infinite;
    `),b)),C=o.forwardRef(function(e,r){let t=(0,u.Z)({props:e,name:"MuiCircularProgress"}),{className:o,color:s="primary",disableShrink:l=!1,size:c=40,style:d,thickness:v=3.6,value:f=0,variant:m="indeterminate"}=t,x=(0,n.Z)(t,h),g=(0,i.Z)({},t,{color:s,disableShrink:l,size:c,thickness:v,value:f,variant:m}),y=S(g),k={},Z={},w={};if("determinate"===m){let b=2*Math.PI*((44-v)/2);k.strokeDasharray=b.toFixed(3),w["aria-valuenow"]=Math.round(f),k.strokeDashoffset=`${((100-f)/100*b).toFixed(3)}px`,Z.transform="rotate(-90deg)"}return(0,p.jsx)(M,(0,i.Z)({className:(0,a.Z)(y.root,o),style:(0,i.Z)({width:c,height:c},Z,d),ownerState:g,ref:r,role:"progressbar"},w,x,{children:(0,p.jsx)(j,{className:y.svg,ownerState:g,viewBox:"22 22 44 44",children:(0,p.jsx)(D,{className:y.circle,style:k,ownerState:g,cx:44,cy:44,r:(44-v)/2,fill:"none",strokeWidth:v})})}))});var P=C},5973:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[campaignId]/overlay/inspiration",function(){return t(720)}])},720:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var n=t(5893),i=t(1163),o=t(9226),a=t(9008),s=t.n(a),l=t(8456),c=t(5675),u=t.n(c),d=t(4505);function v(e){let{player:r,campaign:t,scale:i=.8}=e,{cooldownTimeRemaining:a,percentComplete:s}=(0,d.qI)({player:r,campaign:t}),c=r.isGM||!r.characterName?r.playerName:r.characterName,v=r.inspiration;return(0,n.jsxs)(o.Z,{component:"div",sx:{position:"relative",textAlign:"center",height:154,width:132,transform:"scale(".concat(100*i,"%)")},children:[(0,n.jsx)(o.Z,{component:"div",sx:{top:0,bottom:0,left:0,right:0,overflow:"hidden",position:"absolute",filter:a>0?"grayscale(100%)":void 0},children:(0,n.jsx)(u(),{src:"/badge.png",alt:"background",layout:"fill"})}),(0,n.jsx)(o.Z,{component:"div",sx:{paddingTop:4,position:"relative",fontSize:48,fontWeight:700},children:a>0?(0,n.jsx)(l.Z,{variant:"determinate",value:s}):v}),(0,n.jsx)(o.Z,{component:"div",sx:{fontSize:24,fontWeight:700,position:"absolute",left:0,right:0,bottom:18,color:a>0?"text.secondary":"text.primary"},children:c})]})}var f=t(8054);function m(){var e,r,t;let a=(0,i.useRouter)(),{campaignId:l}=a.query,{data:c}=(0,f.mU)({variables:{id:l}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s(),{children:(0,n.jsx)("title",{children:"".concat(null!==(t=null==c?void 0:null===(e=c.campaign)||void 0===e?void 0:e.name)&&void 0!==t?t:"Campaign"," Inspiration | OBS GM Overlay")})}),(0,n.jsx)(o.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around"},children:null==c?void 0:null===(r=c.campaign)||void 0===r?void 0:r.players.map(e=>{var r;return(null==c?void 0:null===(r=c.campaign)||void 0===r?void 0:r.gmInspiration)||!e.isGM?(0,n.jsx)(v,{player:e,campaign:c.campaign},e.id):null})})]})}},4505:function(e,r,t){"use strict";t.d(r,{J_:function(){return s},sG:function(){return i},qI:function(){return f}});var n=t(3595);function i(e){return e instanceof Date?e:e?(0,n.D)(e):void 0}var o=t(2290),a=t(2090);function s(e,r){var t;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["hours","minutes","seconds"],i={xSeconds:"{{count}}",xMinutes:"{{count}}",xHours:"{{count}}"},s=(0,o.y)({start:e,end:r});return(0,a.L)(s,{format:n,locale:{formatDistance:(e,r)=>{var n;return null!==(t=null===(n=i[e])||void 0===n?void 0:n.replace("{{count}}",null==r?void 0:r.toString().padStart(2,"0")))&&void 0!==t?t:""}},delimiter:":",zero:!0}).replace(/^0(\d)/,"$1")}var l=t(7294),c=t(3337),u=t(3732),d=t(209);function v(e){let{player:r,campaign:t}=e;if(!r||!t||!t.gmInspiration&&r.isGM||"none"===t.cooldownType)return 0;let n=i("player"===t.cooldownType?r.lastInspirationUsed:t.lastInspirationUsed),o=(0,u.m)(n,t.cooldownTime),a=o>new Date,s=a?(0,d.c)(o,new Date):0;return s}function f(e){var r;let{player:t,campaign:n}=e,[i,o]=(0,l.useState)(v({player:t,campaign:n}));return(0,l.useEffect)(()=>{o(v({player:t,campaign:n}))},[t,n]),(0,c.Z)(()=>{o(v({player:t,campaign:n}))},n&&"none"===n.cooldownType?null:1e3),{cooldownTimeRemaining:i,percentComplete:Math.round(i/((null!==(r=null==n?void 0:n.cooldownTime)&&void 0!==r?r:0)*60)*100),formattedDuration:(0,a.L)({hours:Math.trunc(i/60/60),minutes:Math.trunc(i/60%60),seconds:Math.trunc(i%60)},{format:["hours","minutes","seconds"]})}}}},function(e){e.O(0,[948,675,774,888,179],function(){return e(e.s=5973)}),_N_E=e.O()}]);