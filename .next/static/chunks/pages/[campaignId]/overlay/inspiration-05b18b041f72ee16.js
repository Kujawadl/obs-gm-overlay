(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{98456:function(e,r,t){"use strict";t.d(r,{Z:function(){return P}});var n=t(63366),i=t(87462),o=t(67294),a=t(86010),s=t(94780),l=t(70917),c=t(98216),u=t(71657),d=t(90948),f=t(1588),m=t(34867);function v(e){return(0,m.Z)("MuiCircularProgress",e)}(0,f.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var p=t(85893);let h=["className","color","disableShrink","size","style","thickness","value","variant"],g=e=>e,x,y,Z,k,w=(0,l.F4)(x||(x=g`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),b=(0,l.F4)(y||(y=g`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),S=e=>{let{classes:r,variant:t,color:n,disableShrink:i}=e,o={root:["root",t,`color${(0,c.Z)(n)}`],svg:["svg"],circle:["circle",`circle${(0,c.Z)(t)}`,i&&"circleDisableShrink"]};return(0,s.Z)(o,v,r)},M=(0,d.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[t.variant],r[`color${(0,c.Z)(t.color)}`]]}})(({ownerState:e,theme:r})=>(0,i.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:r.transitions.create("transform")},"inherit"!==e.color&&{color:(r.vars||r).palette[e.color].main}),({ownerState:e})=>"indeterminate"===e.variant&&(0,l.iv)(Z||(Z=g`
      animation: ${0} 1.4s linear infinite;
    `),w)),j=(0,d.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),C=(0,d.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.circle,r[`circle${(0,c.Z)(t.variant)}`],t.disableShrink&&r.circleDisableShrink]}})(({ownerState:e,theme:r})=>(0,i.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:r.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,l.iv)(k||(k=g`
      animation: ${0} 1.4s ease-in-out infinite;
    `),b)),D=o.forwardRef(function(e,r){let t=(0,u.Z)({props:e,name:"MuiCircularProgress"}),{className:o,color:s="primary",disableShrink:l=!1,size:c=40,style:d,thickness:f=3.6,value:m=0,variant:v="indeterminate"}=t,g=(0,n.Z)(t,h),x=(0,i.Z)({},t,{color:s,disableShrink:l,size:c,thickness:f,value:m,variant:v}),y=S(x),Z={},k={},w={};if("determinate"===v){let b=2*Math.PI*((44-f)/2);Z.strokeDasharray=b.toFixed(3),w["aria-valuenow"]=Math.round(m),Z.strokeDashoffset=`${((100-m)/100*b).toFixed(3)}px`,k.transform="rotate(-90deg)"}return(0,p.jsx)(M,(0,i.Z)({className:(0,a.Z)(y.root,o),style:(0,i.Z)({width:c,height:c},k,d),ownerState:x,ref:r,role:"progressbar"},w,g,{children:(0,p.jsx)(j,{className:y.svg,ownerState:x,viewBox:"22 22 44 44",children:(0,p.jsx)(C,{className:y.circle,style:Z,ownerState:x,cx:44,cy:44,r:(44-f)/2,fill:"none",strokeWidth:f})})}))});var P=D},35973:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[campaignId]/overlay/inspiration",function(){return t(60720)}])},60720:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return v}});var n=t(85893),i=t(11163),o=t(99226),a=t(9008),s=t.n(a),l=t(98456),c=t(25675),u=t.n(c),d=t(24505);function f(e){let{player:r,campaign:t,scale:i=.8}=e,{cooldownTimeRemaining:a,percentComplete:s}=(0,d.qI)({player:r,campaign:t}),c=r.isGM||!r.characterName?r.playerName:r.characterName,f=r.inspiration;return(0,n.jsxs)(o.Z,{component:"div",sx:{position:"relative",textAlign:"center",height:154,width:132,transform:"scale(".concat(100*i,"%)")},children:[(0,n.jsx)(o.Z,{component:"div",sx:{top:0,bottom:0,left:0,right:0,overflow:"hidden",position:"absolute",filter:a>0?"grayscale(100%)":void 0},children:(0,n.jsx)(u(),{src:"/badge.png",alt:"background",layout:"fill"})}),(0,n.jsx)(o.Z,{component:"div",sx:{paddingTop:4,position:"relative",fontSize:48,fontWeight:700},children:a>0?(0,n.jsx)(l.Z,{variant:"determinate",value:s}):f}),(0,n.jsx)(o.Z,{component:"div",sx:{fontSize:24,fontWeight:700,position:"absolute",left:0,right:0,bottom:18,color:a>0?"text.secondary":"text.primary"},children:c})]})}var m=t(74291);function v(){var e,r,t;let a=(0,i.useRouter)(),{campaignId:l}=a.query,{data:c}=(0,m.mU)({variables:{id:l}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s(),{children:(0,n.jsx)("title",{children:"".concat(null!==(t=null==c?void 0:null===(e=c.campaign)||void 0===e?void 0:e.name)&&void 0!==t?t:"Campaign"," Inspiration | OBS GM Overlay")})}),(0,n.jsx)(o.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around"},children:null==c?void 0:null===(r=c.campaign)||void 0===r?void 0:r.players.map(e=>{var r;return(null==c?void 0:null===(r=c.campaign)||void 0===r?void 0:r.gmInspiration)||!e.isGM?(0,n.jsx)(f,{player:e,campaign:c.campaign},e.id):null})})]})}},24505:function(e,r,t){"use strict";t.d(r,{J_:function(){return s},sG:function(){return i},qI:function(){return m},y1:function(){return v}});var n=t(23855);function i(e){return(0,n.Z)(e)}var o=t(12393),a=t(81388);function s(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["hours","minutes","seconds"],n={xSeconds:"{{count}}",xMinutes:"{{count}}",xHours:"{{count}}"},i=(0,o.Z)({start:e,end:r});return(0,a.Z)(i,{format:t,locale:{formatDistance:(e,r)=>n[e].replace("{{count}}",null==r?void 0:r.toString().padStart(2,"0"))},delimiter:":",zero:!0}).replace(/^0(\d)/,"$1")}var l=t(67294),c=t(43337),u=t(56593),d=t(11699);function f(e){let{player:r,campaign:t}=e;if(!r||!t||!t.gmInspiration&&r.isGM||"none"===t.cooldownType)return 0;let n=i("player"===t.cooldownType?r.lastInspirationUsed:t.lastInspirationUsed),o=(0,u.Z)(n,t.cooldownTime),a=o>new Date,s=a?(0,d.Z)(o,new Date):0;return s}function m(e){var r;let{player:t,campaign:n}=e,[i,o]=(0,l.useState)(f({player:t,campaign:n}));return(0,l.useEffect)(()=>{o(f({player:t,campaign:n}))},[t,n]),(0,c.Z)(()=>{o(f({player:t,campaign:n}))},n&&"none"===n.cooldownType?null:1e3),{cooldownTimeRemaining:i,percentComplete:Math.round(i/((null!==(r=null==n?void 0:n.cooldownTime)&&void 0!==r?r:0)*60)*100),formattedDuration:(0,a.Z)({hours:Math.trunc(i/60/60),minutes:Math.trunc(i/60%60),seconds:Math.trunc(i%60)},{format:["hours","minutes","seconds"]})}}function v(e,r){let t=(0,l.useRef)();return(0,l.useCallback)(function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];let a=()=>{clearTimeout(t.current),e(...i)};clearTimeout(t.current),t.current=window.setTimeout(a,r)},[e,r])}}},function(e){e.O(0,[26,675,774,888,179],function(){return e(e.s=35973)}),_N_E=e.O()}]);